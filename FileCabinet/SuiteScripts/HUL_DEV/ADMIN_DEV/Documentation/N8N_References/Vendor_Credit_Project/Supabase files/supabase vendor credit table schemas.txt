create table public.vra_matching (
  id uuid not null default extensions.uuid_generate_v4 (),
  process_id text null,
  vendor_credit_number text null,
  vendor_netsuite_id text null,
  vra_number_on_credit text null,
  po_numbers_on_credit text[] null,
  matched_vra_id text null,
  matching_method text null,
  matching_confidence numeric null,
  line_items_matched integer null,
  line_items_total integer null,
  potential_vras jsonb null,
  matching_details jsonb null,
  status text null,
  created_at timestamp without time zone null default now(),
  updated_at timestamp without time zone null default now(),
  constraint vra_matching_pkey primary key (id)
) TABLESPACE pg_default;

create index IF not exists idx_vra_process on public.vra_matching using btree (process_id) TABLESPACE pg_default;

create index IF not exists idx_vra_status on public.vra_matching using btree (status) TABLESPACE pg_default;



create table public.vendor_profiles (
  id uuid not null default extensions.uuid_generate_v4 (),
  vendor_name text not null,
  vendor_aliases text[] null default '{}'::text[],
  vendor_keywords text[] null default '{}'::text[],
  created_at timestamp without time zone null default now(),
  updated_at timestamp without time zone null default now(),
  sign_convention text null default 'unknown'::text,
  line_items_sign_rule text null default 'follow_total'::text,
  restock_fee_location text null default 'unknown'::text,
  restock_fee_patterns text[] null default '{}'::text[],
  restock_fee_is_charge boolean null default true,
  core_charge_location text null default 'unknown'::text,
  core_charge_patterns text[] null default '{}'::text[],
  sales_tax_increases_credit boolean null default true,
  misc_charges_reduce_credit boolean null default true,
  misc_charge_patterns text[] null default '{}'::text[],
  date_format_primary text null default 'MM/DD/YYYY'::text,
  date_formats_accepted text[] null default '{MM/DD/YYYY,MM/DD/YY,M/D/YYYY}'::text[],
  po_number_patterns text[] null default '{}'::text[],
  vra_number_patterns text[] null default '{}'::text[],
  order_number_is_10_digits boolean null default true,
  field_mappings jsonb null default '{}'::jsonb,
  typically_multipage boolean null default false,
  max_expected_pages integer null default 1,
  total_documents_processed integer null default 0,
  successful_processes integer null default 0,
  failed_processes integer null default 0,
  average_quality_score numeric(5, 2) null default 0,
  last_quality_scores numeric(5, 2) [] null default '{}'::numeric[],
  confidence_level numeric(5, 2) null default 50.0,
  is_active boolean null default true,
  total_amount_sign_rule text null default 'follow_convention'::text,
  constraint vendor_profiles_pkey primary key (id),
  constraint vendor_profiles_vendor_name_key unique (vendor_name)
) TABLESPACE pg_default;

create index IF not exists idx_vendor_profiles_name on public.vendor_profiles using btree (vendor_name) TABLESPACE pg_default;

create table public.vendor_profiles (
  id uuid not null default extensions.uuid_generate_v4 (),
  vendor_name text not null,
  vendor_aliases text[] null default '{}'::text[],
  vendor_keywords text[] null default '{}'::text[],
  created_at timestamp without time zone null default now(),
  updated_at timestamp without time zone null default now(),
  sign_convention text null default 'unknown'::text,
  line_items_sign_rule text null default 'follow_total'::text,
  restock_fee_location text null default 'unknown'::text,
  restock_fee_patterns text[] null default '{}'::text[],
  restock_fee_is_charge boolean null default true,
  core_charge_location text null default 'unknown'::text,
  core_charge_patterns text[] null default '{}'::text[],
  sales_tax_increases_credit boolean null default true,
  misc_charges_reduce_credit boolean null default true,
  misc_charge_patterns text[] null default '{}'::text[],
  date_format_primary text null default 'MM/DD/YYYY'::text,
  date_formats_accepted text[] null default '{MM/DD/YYYY,MM/DD/YY,M/D/YYYY}'::text[],
  po_number_patterns text[] null default '{}'::text[],
  vra_number_patterns text[] null default '{}'::text[],
  order_number_is_10_digits boolean null default true,
  field_mappings jsonb null default '{}'::jsonb,
  typically_multipage boolean null default false,
  max_expected_pages integer null default 1,
  total_documents_processed integer null default 0,
  successful_processes integer null default 0,
  failed_processes integer null default 0,
  average_quality_score numeric(5, 2) null default 0,
  last_quality_scores numeric(5, 2) [] null default '{}'::numeric[],
  confidence_level numeric(5, 2) null default 50.0,
  is_active boolean null default true,
  total_amount_sign_rule text null default 'follow_convention'::text,
  constraint vendor_profiles_pkey primary key (id),
  constraint vendor_profiles_vendor_name_key unique (vendor_name)
) TABLESPACE pg_default;

create index IF not exists idx_vendor_profiles_name on public.vendor_profiles using btree (vendor_name) TABLESPACE pg_default;


create table public.review_feedback (
  id uuid not null default extensions.uuid_generate_v4 (),
  process_id text null,
  processing_history_id uuid null,
  reviewed_by text null,
  review_action text null,
  corrected_vendor_name text null,
  corrected_total numeric null,
  corrected_sign_rule text null,
  corrected_line_items jsonb null,
  feedback_notes text null,
  vendor_rule_suggestions jsonb null,
  original_quality_score integer null,
  reviewed_at timestamp without time zone null default now(),
  constraint review_feedback_pkey primary key (id),
  constraint review_feedback_process_id_key unique (process_id),
  constraint review_feedback_processing_history_id_fkey foreign KEY (processing_history_id) references processing_history (id)
) TABLESPACE pg_default;

create index IF not exists idx_feedback_action on public.review_feedback using btree (review_action) TABLESPACE pg_default;

create index IF not exists idx_feedback_date on public.review_feedback using btree (reviewed_at) TABLESPACE pg_default;

create index IF not exists idx_feedback_process on public.review_feedback using btree (process_id) TABLESPACE pg_default;


create table public.review_feedback (
  id uuid not null default extensions.uuid_generate_v4 (),
  process_id text null,
  processing_history_id uuid null,
  reviewed_by text null,
  review_action text null,
  corrected_vendor_name text null,
  corrected_total numeric null,
  corrected_sign_rule text null,
  corrected_line_items jsonb null,
  feedback_notes text null,
  vendor_rule_suggestions jsonb null,
  original_quality_score integer null,
  reviewed_at timestamp without time zone null default now(),
  constraint review_feedback_pkey primary key (id),
  constraint review_feedback_process_id_key unique (process_id),
  constraint review_feedback_processing_history_id_fkey foreign KEY (processing_history_id) references processing_history (id)
) TABLESPACE pg_default;

create index IF not exists idx_feedback_action on public.review_feedback using btree (review_action) TABLESPACE pg_default;

create index IF not exists idx_feedback_date on public.review_feedback using btree (reviewed_at) TABLESPACE pg_default;

create index IF not exists idx_feedback_process on public.review_feedback using btree (process_id) TABLESPACE pg_default;

create table public.review_feedback (
  id uuid not null default extensions.uuid_generate_v4 (),
  process_id text null,
  processing_history_id uuid null,
  reviewed_by text null,
  review_action text null,
  corrected_vendor_name text null,
  corrected_total numeric null,
  corrected_sign_rule text null,
  corrected_line_items jsonb null,
  feedback_notes text null,
  vendor_rule_suggestions jsonb null,
  original_quality_score integer null,
  reviewed_at timestamp without time zone null default now(),
  constraint review_feedback_pkey primary key (id),
  constraint review_feedback_process_id_key unique (process_id),
  constraint review_feedback_processing_history_id_fkey foreign KEY (processing_history_id) references processing_history (id)
) TABLESPACE pg_default;

create index IF not exists idx_feedback_action on public.review_feedback using btree (review_action) TABLESPACE pg_default;

create index IF not exists idx_feedback_date on public.review_feedback using btree (reviewed_at) TABLESPACE pg_default;

create index IF not exists idx_feedback_process on public.review_feedback using btree (process_id) TABLESPACE pg_default;


create table public.review_feedback (
  id uuid not null default extensions.uuid_generate_v4 (),
  process_id text null,
  processing_history_id uuid null,
  reviewed_by text null,
  review_action text null,
  corrected_vendor_name text null,
  corrected_total numeric null,
  corrected_sign_rule text null,
  corrected_line_items jsonb null,
  feedback_notes text null,
  vendor_rule_suggestions jsonb null,
  original_quality_score integer null,
  reviewed_at timestamp without time zone null default now(),
  constraint review_feedback_pkey primary key (id),
  constraint review_feedback_process_id_key unique (process_id),
  constraint review_feedback_processing_history_id_fkey foreign KEY (processing_history_id) references processing_history (id)
) TABLESPACE pg_default;

create index IF not exists idx_feedback_action on public.review_feedback using btree (review_action) TABLESPACE pg_default;

create index IF not exists idx_feedback_date on public.review_feedback using btree (reviewed_at) TABLESPACE pg_default;

create index IF not exists idx_feedback_process on public.review_feedback using btree (process_id) TABLESPACE pg_default;